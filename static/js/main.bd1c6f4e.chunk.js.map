{"version":3,"sources":["components/LocationColumn.js","helpers/api.js","helpers/sort.js","helpers/transformData.js","App.js","helpers/loadScript.js","index.js"],"names":["uniqid","require","LocationColumn","state","active","addClass","index","element","_this$props","_this","props","showDetails","data","newItems","Array","length","fill","oldIndex","setState","_this2","this","_this$props2","title","react_default","a","createElement","className","map","onClick","key","Component","makeRequest","url","fetch","then","response","json","API_KEY","BASE_URL","sort","items","Object","keys","b","transformData","country","city","street","houseNumber","newStreet","newCity","parseInt","replace","split","join","match","App","countries","cities","companies","collection","address","coords","lat","lng","setdefaultView","sortedCountries","_this$state","reduce","total","current","firstCity","find","obj","_transformData","concat","results","geometry","location","initMap","catch","error","console","warn","addCitiesToCountries","objectSpread","defineProperty","Country","toConsumableArray","City","log","sortCountries","showCountry","sortedCities","prevState","showCity","filter","companyNames","forEach","company","push","CompanyName","sortedCompanies","showCompany","getCoords","_ref","includes","_transformData2","renderMap","window","document","getElementsByTagName","script","src","async","defer","parentNode","insertBefore","loadScript","_this$state$coords","google","maps","Map","getElementById","center","zoom","Marker","position","changePosition","_ref2","Customers","components_LocationColumn","id","ReactDOM","render","src_App_0"],"mappings":"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","file":"static/js/main.bd1c6f4e.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nconst uniqid = require('uniqid');\r\n\r\nclass LocationColumn extends Component {\r\n  state = {\r\n    active: [],\r\n  };\r\n\r\n  addClass = (index, element) => {\r\n    const { showDetails, data } = this.props;\r\n    const newItems = Array(data.length).fill(false);\r\n    const oldIndex = newItems[index];\r\n    newItems[index] = !oldIndex;\r\n    this.setState({\r\n      active: newItems,\r\n    },\r\n    () => {\r\n      showDetails(element);\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { title, data } = this.props;\r\n    const { active } = this.state;\r\n\r\n    return (\r\n      <div className=\"location\">\r\n        <p className=\"location__title\">{title}</p>\r\n        {data.length ? (\r\n          <ul className=\"location__items\">\r\n            {data.map((element, index) => (\r\n              <li\r\n                className={\r\n                  active[index]\r\n                  ? 'location__item active'\r\n                  : 'location__item'\r\n                }\r\n                onClick={() => {\r\n                  this.addClass(index, element);\r\n                }}\r\n                key={uniqid()}\r\n              >\r\n                {element}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        ) : (title === 'Countries') ? (\r\n          <div className=\"location__loading\">Loading...</div>\r\n        ) : (\r\n          <div className=\"location__loading\"></div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LocationColumn;","export const makeRequest = (url) => {\r\n  return fetch(url)\r\n  .then(response => response.json())\r\n};\r\nexport const API_KEY = 'AIzaSyCjj3wuoUWKPBMR1HbUxyFn5lBnyjGOXKs';\r\nexport const BASE_URL = `https://maps.googleapis.com/maps/api/geocode/json?address=`;\r\nexport const DATA_FROM_SERVER = 'https://api.myjson.com/bins/kmvt0';","const sort = (items, title) => {\r\n  switch(title) {\r\n    case 'cities': return Object.keys(items).sort((a, b) => items[b] - items[a]);\r\n    break;\r\n    case 'countries': return Object.keys(items).sort((a, b) => items[b].length - items[a].length);\r\n    break;\r\n    case 'companies': return items.sort((a, b) => items[a] - items[b]);\r\n    break;\r\n    default: items.sort((a, b) => items[a] - items[b]);\r\n    break;\r\n  }\r\n};\r\n\r\nexport default sort;","//Regular expressions for different address formats\r\nconst transformData = (country, city, street) => {\r\n  let houseNumber;\r\n  let newStreet;\r\n  let newCity;\r\n\r\n    switch(country) {\r\n      case 'USA': \r\n      case 'Canada':\r\n      case 'Ireland':\r\n        houseNumber = parseInt(street) || \"\";\r\n        newStreet = street.replace(/^[ 0-9]+(-\\s)?/g, '')\r\n        .replace(/\\sSuite\\s\\d+(\\w)?/, '')\r\n        .replace(/Way/,\"St\")\r\n        .replace(/Jefferson/, \"SW Jefferson\")\r\n        .replace(/Dr./,\"Rd. NW\")\r\n        .replace(/City Center Plaza 516 Main/,\"516 E Main\")\r\n        .split(\" \").join('+');\r\n        newCity = city.replace(/\\s/g, \"+\")\r\n        .replace(/Elgin/, \"South Elgin\");\r\n        break;\r\n\r\n      case 'Germany': \r\n      case 'Brazil':\r\n      case 'Mexico':\r\n      case 'Spain':\r\n      case 'Argentina':\r\n      case 'Italy':\r\n      case 'Sweden':\r\n      case 'Austria':\r\n      case 'Switzerland':\r\n      case 'Portugal':\r\n      case 'Belgium':\r\n      case 'Denmark':\r\n      case 'Finland':\r\n      case 'Norway':\r\n      case 'Poland':\r\n        houseNumber = street.replace(/[A-Za-z\\.\\sßíóàêçñäúÅæ\\/\\,]+/, '');\r\n        newStreet = street.replace(/\\s\\s+/g,\" \")\r\n        .replace(/\\//,\"\")\r\n        .replace(/\\,?\\s\\d+$/, '')\r\n        .replace(/Platz/,'Str')\r\n        .replace(/Provinciale/, \"Provinciale Sud\")\r\n        .replace(/Bianco/, \"Bianco Moncalieri\")\r\n        .replace(/Grenzacherweg/, \"\")\r\n        .replace(/Estrada/, \"Tv.\")\r\n        .replace(/Rua do Mercado/, \"Alameda do Mercado\")\r\n        .split(\" \").join('+');\r\n        newCity = city.replace(/\\s/g, \"+\")\r\n        .replace(/Münster/,'Bocholt')\r\n        .replace(/Å/, \"Aa\");;\r\n        break;\r\n\r\n      case 'France':\r\n      case 'UK':\r\n        houseNumber = parseInt(street) || \"\";\r\n        newStreet = street.replace(/\\s\\s+/g,\" \")\r\n        .replace(/^[ 0-9,]+(\\s)?/g, '')\r\n        .replace(/-/,\"+\")\r\n        .split(\" \").join(\"+\");\r\n        newCity = city.replace(/\\s/g, \"+\");\r\n        break;\r\n\r\n      case 'Venezuela':\r\n        houseNumber = parseInt(street) ||street.match(/\\d+/)[0] || \"\";\r\n        newStreet = street.replace(/\\s\\s+/g,\" \")\r\n        .replace(/\\d+ª?\\s/, \"\")\r\n        .replace(/\\s#\\d+-\\d+/, \"\")\r\n        .replace(/Carrera con\\s/, \"\")\r\n        .split(\" \").join('+');\r\n        newCity = city.replace(/\\s/g, \"+\");\r\n        break;\r\n\r\n      default: \r\n        houseNumber = houseNumber = parseInt(street) || street.match(/\\d+$/)[0] || \"\";\r\n        newStreet = street.replace(/\\s\\s+/g,\" \")\r\n        .split(\" \").join('+');\r\n        newCity = city.replace(/\\s/g, \"+\");\r\n        break;\r\n    }\r\n    return {\r\n      houseNumber,\r\n      newStreet,\r\n      newCity\r\n    }\r\n};\r\nexport default transformData;","import React, { Component } from 'react';\nimport './App.css';\nimport LocationColumn from './components/LocationColumn';\nimport loadScript from './helpers/loadScript';\nimport { makeRequest, API_KEY, BASE_URL, DATA_FROM_SERVER } from './helpers/api';\nimport sort from './helpers/sort';\nimport transformData from './helpers/transformData';\n\nclass App extends Component {\n\n  state = {\n    countries: [],\n    cities: [],\n    companies: [],\n    collection: {},\n    data: null,\n    address: {},\n    coords: {\n      lat: 0,\n      lng: 0\n    }\n  };\n\n  componentDidMount() {\n    this.renderMap();\n\n    makeRequest(DATA_FROM_SERVER)\n    .then(data => {\n      data.Customers.map(obj => this.setState({ \n      //define all countries with the value of empty array\n        collection: {\n          ...this.state.collection,\n          [obj.Country]: []\n        },\n        data: data.Customers\n      }, () => {\n        console.log('Countries were successfully added to this.state.collection');\n      }));\n    \n      this.addCitiesToCountries();\n\n      this.sortCountries();\n      \n    })\n    .catch(error => console.warn(error));\n  }\n\n  setdefaultView = (sortedCountries) => {\n    const { collection, data } = this.state;\n\n    let country = sortedCountries[0];\n    let cities = collection[country].reduce((total, current) => {\n      total[current] = (total[current] || 0) + 1;\n      return total;\n    }, {});\n    let firstCity = sort(cities, 'cities')[0];\n    let street = data.find(obj => obj['City'] === firstCity)['Address'];\n    const { houseNumber, newStreet, newCity } = transformData(country, firstCity, street);\n      \n    const url = `${BASE_URL}${houseNumber}+${newStreet}+${newCity}+${country}&key=${API_KEY}`;\n        \n    makeRequest(url)\n    .then(data => {\n      this.setState({\n        coords: data.results[0].geometry.location\n      }, () => {\n        this.initMap();\n      });\n    })\n    .catch(error => console.warn(error));\n  }\n\n  //add cities to country arrays\n  addCitiesToCountries = () => {\n    this.state.data.map(obj => this.setState({\n      collection: {\n        ...this.state.collection,\n        [obj.Country]: [...this.state.collection[obj.Country], obj.City]\n      }\n    }, () => {\n      console.log('Cities were added to country arrays');\n    }));\n  }\n\n  sortCountries = () => {\n    const { collection } = this.state;\n    const sortedCountries = sort(collection, 'countries');\n\n    this.setState({\n      countries: sortedCountries,\n    }, () => {\n      console.log('Countries were sorted');\n      //\n      this.setdefaultView(sortedCountries);\n      //\n    });\n  }\n\n  showCountry = (country) => {\n    const { collection } = this.state;\n\n    //get an object: key(city) -> value(count of companies)\n    const cities = collection[country].reduce((total, current) => {\n      total[current] = (total[current] || 0) + 1;\n      return total;\n    }, {});\n\n    //find a city with the greatest number of companies\n    const sortedCities = sort(cities, 'cities');\n\n    this.setState(prevState => ({\n      cities: sortedCities,\n      address: {...prevState.address, country}\n    }));\n  }\n\n  showCity = (city) => {\n    const { data } = this.state;\n    const companies = data.filter(obj => obj['City'] === city);\n\n    const companyNames = [];\n    companies.forEach(company => companyNames.push(company.CompanyName));\n\n    const sortedCompanies = sort(companyNames, 'companies');\n\n    this.setState(prevState => ({\n      companies: sortedCompanies,\n      address: {...prevState.address, city}\n    }));\n  }\n\n  showCompany = (company) => {\n    console.log(company)\n    const { data } = this.state;\n    const street = data.filter(obj => obj['CompanyName'] === company)[0]['Address'];\n\n    this.setState(prevState => ({\n      address: {...prevState.address, street }\n    }), () => {\n      this.getCoords(this.state.address);\n    });\n  }\n\n  getCoords = ({ country, city, street }) => {\n    console.log(country,city,street);\n\n    if (street.includes('\\'')) {\n      street = street.replace(/\\'/, '');\n    }\n\n    const { houseNumber, newStreet, newCity } = transformData(country, city, street);\n    const url = `${BASE_URL}${houseNumber}+${newStreet}+${newCity}+${country}&key=${API_KEY}`;\n        \n    makeRequest(url)\n    .then(data => {\n      this.setState({\n        coords: data.results[0].geometry.location\n      }, () => {\n        this.initMap();\n      });\n    })\n    .catch(error => console.warn(error));\n  }\n\n  renderMap = () => {\n    loadScript(\n      `https://maps.googleapis.com/maps/api/js?key=${API_KEY}&callback=initMap`\n    );\n    window.initMap = this.initMap;\n  };\n\n  initMap = () => {\n    const { lat, lng } = this.state.coords;\n\n    const map = new window.google.maps.Map(document.getElementById(\"map\"), {\n      center: { lat, lng },\n      zoom: 15\n    });\n\n    const marker = new window.google.maps.Marker({\n      position: { lat, lng },\n      map\n    });\n  };\n\n  changePosition = ({ lat, lng }) => {\n    this.setState({\n        coords: { lat, lng }\n      }, () => {\n        this.initMap();\n      });\n  };\n\n  render() {\n    return (\n      <div className=\"App\">\n        <LocationColumn \n          title=\"Countries\" \n          data={this.state.countries}\n          showDetails={this.showCountry}   \n        />\n        <LocationColumn \n          title=\"Cities\" \n          data={this.state.cities}\n          showDetails={this.showCity} \n        />\n        <LocationColumn \n          title=\"Company\" \n          data={this.state.companies} \n          showDetails={this.showCompany} \n        />\n        <div className=\"map\">\n          <p className=\"map__title\">Map</p>\n          <div className=\"map__display\">\n            <div id=\"map\"></div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n  \n}\n\n\nexport default App;\n","export default function loadScript(url) {\r\n  let index = window.document.getElementsByTagName(\"script\")[0];\r\n  let script = window.document.createElement(\"script\");\r\n  script.src = url;\r\n  script.async = true;\r\n  script.defer = true;\r\n  index.parentNode.insertBefore(script, index);\r\n};\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n// import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}