(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(t,e,n){t.exports=n(22)},18:function(t,e,n){},19:function(t,e,n){},22:function(t,e,n){"use strict";n.r(e);var o=n(0),a=n.n(o),c=n(10),s=n.n(c),i=(n(18),n(7)),r=n(11),l=n(6),u=n(1),d=n(2),p=n(4),m=n(3),f=n(5),h=(n(19),n(8)),y=n(21),g=function(t){function e(){var t,n;Object(u.a)(this,e);for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return(n=Object(p.a)(this,(t=Object(m.a)(e)).call.apply(t,[this].concat(a)))).state={active:[]},n.addClass=function(t,e){var o=n.state.active,a=Array(o.length).fill(!1);a[t]=!a[t],n.setState(function(t){return{active:a}},function(){return console.log(n.state.active)})},n}return Object(f.a)(e,t),Object(d.a)(e,[{key:"componentWillReceiveProps",value:function(t){var e=this,n=t.data;this.setState({active:Array(n.length).fill(!1)},function(){return console.log(e.state.active)})}},{key:"render",value:function(){var t=this;return a.a.createElement("div",{className:"location"},a.a.createElement("p",{className:"location__title"},this.props.title),this.props.data.length?a.a.createElement("ul",{className:"location__items"},this.props.data.map(function(e,n){return a.a.createElement("li",{className:t.state.active[n]?"location__item active":"location__item",onClick:y(function(){return t.props.showCountry(e)},function(){return t.addClass(n)}),key:h()},e)})):a.a.createElement("div",{className:"location__loading"},"Loading..."))}}]),e}(o.Component),v=n(8),C=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(m.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(d.a)(e,[{key:"render",value:function(){var t=this;return a.a.createElement("div",{className:"location"},a.a.createElement("p",{className:"location__title"},this.props.title),a.a.createElement("ul",{className:"location__items"},this.props.data.map(function(e){return a.a.createElement("li",{onClick:function(){return t.props.showCity(e)},key:v()},e)})))}}]),e}(o.Component),w=n(8),j=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(m.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(d.a)(e,[{key:"render",value:function(){var t=this;return a.a.createElement("div",{className:"location"},a.a.createElement("p",{className:"location__title"},this.props.title),a.a.createElement("ul",{className:"location__items"},this.props.data.map(function(e){return a.a.createElement("li",{onClick:function(){return t.props.showCompany(e)},key:w()},e)})))}}]),e}(o.Component),b="AIzaSyCjj3wuoUWKPBMR1HbUxyFn5lBnyjGOXKs",O="https://maps.googleapis.com/maps/api/geocode/json?address=";var E=function(t){function e(){var t,n;Object(u.a)(this,e);for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return(n=Object(p.a)(this,(t=Object(m.a)(e)).call.apply(t,[this].concat(a)))).state={countries:[],cities:[],companies:[],collection:{},data:null,address:{},coords:{lat:53.35534,lng:23.34618}},n.addCitiesToCountries=function(){n.state.data.map(function(t){return n.setState({collection:Object(l.a)({},n.state.collection,Object(i.a)({},t.Country,[].concat(Object(r.a)(n.state.collection[t.Country]),[t.City])))},function(){console.log("Cities were added to country arrays")})})},n.sortCountries=function(){var t=n.state.collection,e=Object.keys(t).sort(function(e,n){return t[n].length-t[e].length});n.setState({countries:e},function(){console.log("Countries were sorted")})},n.showCountry=function(t){var e=n.state.collection[t].reduce(function(t,e){return t[e]=(t[e]||0)+1,t},{}),o=Object.keys(e).sort(function(t,n){return e[n]-e[t]});n.setState(function(e){return{cities:o,address:Object(l.a)({},e.address,{country:t})}})},n.showCity=function(t){var e=n.state.data.filter(function(e){return e.City===t}),o=[];e.forEach(function(t){return o.push(t.CompanyName)});var a=o.sort(function(t,e){return o[t]-o[e]});n.setState(function(e){return{companies:a,address:Object(l.a)({},e.address,{city:t})}})},n.showCompany=function(t){console.log(t);var e=n.state.data.filter(function(e){return e.CompanyName===t})[0].Address;console.log(e),n.setState(function(t){return{address:Object(l.a)({},t.address,{street:e})}},function(){console.log(n.state.address),n.getCoords(n.state.address)})},n.getCoords=function(t){var e=t.country,o=t.city,a=t.street,c=parseInt(a)||"",s=a.replace(/^[ 0-9]+/g,"").split(" ").join("+"),i=o.replace(/\s/g,""),r="".concat(O).concat(c,"+").concat(s,"+").concat(i,"+").concat(e,"&key=").concat(b);console.log("URL: "),console.log(r),fetch(r).then(function(t){return t.json()}).then(function(t){console.log(t.results[0].geometry.location),n.setState({coords:t.results[0].geometry.location},function(){n.initMap()})}).catch(function(t){return console.log(t)})},n.renderMap=function(){!function(t){var e=window.document.getElementsByTagName("script")[0],n=window.document.createElement("script");n.src=t,n.async=!0,n.defer=!0,e.parentNode.insertBefore(n,e)}("https://maps.googleapis.com/maps/api/js?key=".concat(b,"&callback=initMap")),window.initMap=n.initMap},n.initMap=function(){var t=new window.google.maps.Map(document.getElementById("map"),{center:{lat:n.state.coords.lat,lng:n.state.coords.lng},zoom:8});new window.google.maps.Marker({position:{lat:n.state.coords.lat,lng:n.state.coords.lng},map:t,title:"Hello World!"})},n.changePosition=function(t){var e=t.lat,o=t.lng;n.setState({coords:{lat:e,lng:o}},function(){n.initMap()})},n}return Object(f.a)(e,t),Object(d.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.renderMap(),fetch("https://api.myjson.com/bins/kmvt0").then(function(t){return t.json()}).then(function(e){e.Customers.map(function(n){return t.setState({collection:Object(l.a)({},t.state.collection,Object(i.a)({},n.Country,[])),data:e.Customers},function(){console.log("Countries were successfully added to this.state.collection")})}),t.addCitiesToCountries(),t.sortCountries()}).catch(function(t){return console.log(t)})}},{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement(g,{title:"Countries",data:this.state.countries,showCountry:this.showCountry}),a.a.createElement(C,{title:"Cities",data:this.state.cities,showCity:this.showCity}),a.a.createElement(j,{title:"Company",data:this.state.companies,showCompany:this.showCompany}),a.a.createElement("div",{id:"map"}))}}]),e}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[12,1,2]]]);
//# sourceMappingURL=main.b9fb2d71.chunk.js.map