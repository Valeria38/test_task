(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){e.exports=a(21)},17:function(e,t,a){},18:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(9),o=a.n(r),s=(a(17),a(2)),i=a(3),l=a(5),u=a(4),d=a(6),p=a(1),m=a(10),f=a(7),y=(a(18),a(19)),h=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={active:[]},a.addClass=function(e,t){var n=a.props,c=n.showDetails,r=n.data,o=(n.title,Array(r.length).fill(!1)),s=o[e];o[e]=!s,a.setState({active:o},function(){c(t)})},a.removeClasses=function(e){var t=a.props;t.title,t.showDetails;a.setState({active:[]})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.title,n=t.data,r=this.state.active;return c.a.createElement("div",{className:"location"},c.a.createElement("p",{className:"location__title"},a),n.length?c.a.createElement("ul",{className:"location__items"},n.map(function(t,a){return c.a.createElement("li",{className:r[a]?"location__item active":"location__item",onClick:function(){e.addClass(a,t)},key:y()},t)})):"Countries"===a?c.a.createElement("div",{className:"location__loading"},"Loading..."):c.a.createElement("div",{className:"location__loading"}))}}]),t}(n.Component);var g=function(e){return fetch(e).then(function(e){return e.json()})},w="AIzaSyCjj3wuoUWKPBMR1HbUxyFn5lBnyjGOXKs",v="https://maps.googleapis.com/maps/api/geocode/json?address=",C=function(e,t){switch(t){case"cities":return Object.keys(e).sort(function(t,a){return e[a]-e[t]});case"countries":return Object.keys(e).sort(function(t,a){return e[a].length-e[t].length});case"companies":return e.sort(function(t,a){return e[t]-e[a]});default:e.sort(function(t,a){return e[t]-e[a]})}},b=function(e,t,a){var n,c,r;switch(e){case"USA":case"Canada":case"Ireland":n=parseInt(a)||"",c=a.replace(/^[ 0-9]+(-\s)?/g,"").replace(/\sSuite\s\d+(\w)?/,"").replace(/Way/,"St").replace(/Jefferson/,"SW Jefferson").replace(/Dr./,"Rd. NW").replace(/City Center Plaza 516 Main/,"516 E Main").split(" ").join("+"),r=t.replace(/\s/g,"+").replace(/Elgin/,"South Elgin");break;case"Germany":case"Brazil":case"Mexico":case"Spain":case"Argentina":case"Italy":case"Sweden":case"Austria":case"Switzerland":case"Portugal":case"Belgium":case"Denmark":case"Finland":case"Norway":case"Poland":n=a.replace(/[A-Za-z\.\s\xdf\xed\xf3\xe0\xea\xe7\xf1\xe4\xfa\xc5\xe6\/\,]+/,""),c=a.replace(/\s\s+/g," ").replace(/\//,"").replace(/\,?\s\d+$/,"").replace(/Platz/,"Str").replace(/Provinciale/,"Provinciale Sud").replace(/Bianco/,"Bianco Moncalieri").replace(/Grenzacherweg/,"").replace(/Estrada/,"Tv.").replace(/Rua do Mercado/,"Alameda do Mercado").split(" ").join("+"),r=t.replace(/\s/g,"+").replace(/M\xfcnster/,"Bocholt").replace(/\xc5/,"Aa");break;case"France":case"UK":n=parseInt(a)||"",c=a.replace(/\s\s+/g," ").replace(/^[ 0-9,]+(\s)?/g,"").replace(/-/,"+").split(" ").join("+"),r=t.replace(/\s/g,"+");break;case"Venezuela":n=parseInt(a)||a.match(/\d+/)[0]||"",c=a.replace(/\s\s+/g," ").replace(/\d+\xaa?\s/,"").replace(/\s#\d+-\d+/,"").replace(/Carrera con\s/,"").split(" ").join("+"),r=t.replace(/\s/g,"+");break;default:n=n=parseInt(a)||a.match(/\d+$/)[0]||"",c=a.replace(/\s\s+/g," ").split(" ").join("+"),r=t.replace(/\s/g,"+")}return{houseNumber:n,newStreet:c,newCity:r}},j=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={countries:[],cities:[],companies:[],collection:{},data:null,address:{},key1:Math.random(),key2:Math.random(),coords:{lat:null,lng:null},error:!1},a.makeRequestAndUpdate=function(e,t){return g(e).then(function(e){a.setState({coords:e.results[0].geometry.location,error:!1},function(){a.initMap()})}).catch(function(e){console.warn(e),a.setState({error:!0})})},a.setdefaultView=function(e){var t=a.state,n=t.collection,c=t.data,r=e[0],o=n[r].reduce(function(e,t){return e[t]=(e[t]||0)+1,e},{}),s=C(o,"cities")[0],i=c.find(function(e){return e.City===s}).Address,l=b(r,s,i),u=l.houseNumber,d=l.newStreet,p=l.newCity,m="".concat(v).concat(u,"+").concat(d,"+").concat(p,"+").concat(r,"&key=").concat(w);a.makeRequestAndUpdate(m)},a.addCitiesToCountries=function(){a.state.data.map(function(e){return a.setState({collection:Object(f.a)({},a.state.collection,Object(p.a)({},e.Country,[].concat(Object(m.a)(a.state.collection[e.Country]),[e.City])))},function(){console.log("Cities were added to country arrays")})})},a.sortCountries=function(){var e=a.state.collection,t=C(e,"countries");a.setState({countries:t},function(){console.log("Countries were sorted"),a.setdefaultView(t)})},a.showCountry=function(e){var t=a.state.collection[e].reduce(function(e,t){return e[t]=(e[t]||0)+1,e},{}),n=C(t,"cities");a.setState(function(t){return{cities:n,address:Object(f.a)({},t.address,{country:e})}}),a.getRandomKeys("key1","key2"),a.showCity()},a.showCity=function(e){var t=a.state.data.filter(function(t){return t.City===e}),n=[];t.forEach(function(e){return n.push(e.CompanyName)});var c=C(n,"companies");a.setState(function(t){return{companies:c,address:Object(f.a)({},t.address,{city:e})}}),a.getRandomKey("key2")},a.showCompany=function(e){var t=a.state.data.filter(function(t){return t.CompanyName===e})[0].Address;a.setState(function(e){return{address:Object(f.a)({},e.address,{street:t})}},function(){a.getCoords(a.state.address)})},a.getCoords=function(e){var t=e.country,n=e.city,c=e.street;console.log(t,n,c),c.includes("'")&&(c=c.replace(/\'/,""));var r=b(t,n,c),o=r.houseNumber,s=r.newStreet,i=r.newCity,l="".concat(v).concat(o,"+").concat(s,"+").concat(i,"+").concat(t,"&key=").concat(w);a.makeRequestAndUpdate(l)},a.renderMap=function(){!function(e){var t=window.document.getElementsByTagName("script")[0],a=window.document.createElement("script");a.src=e,a.async=!0,a.defer=!0,t.parentNode.insertBefore(a,t)}("https://maps.googleapis.com/maps/api/js?key=".concat(w,"&callback=initMap")),window.initMap=a.initMap},a.initMap=function(){var e=a.state.coords,t=e.lat,n=e.lng;if(null!==t||null!==n){var c=new window.google.maps.Map(document.getElementById("map"),{center:{lat:t,lng:n},zoom:15});new window.google.maps.Marker({position:{lat:t,lng:n},map:c})}},a.getRandomKeys=function(e,t){var n;a.setState((n={},Object(p.a)(n,e,Math.random()),Object(p.a)(n,t,Math.random()),n))},a.getRandomKey=function(e){a.setState(Object(p.a)({},e,Math.random()))},a.changePosition=function(e){var t=e.lat,n=e.lng;a.setState({coords:{lat:t,lng:n}},function(){a.initMap()})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.renderMap(),g("https://api.myjson.com/bins/kmvt0").then(function(t){t.Customers.map(function(a){return e.setState({collection:Object(f.a)({},e.state.collection,Object(p.a)({},a.Country,[])),data:t.Customers},function(){console.log("Countries were successfully added to this.state.collection")})}),e.addCitiesToCountries(),e.sortCountries()}).catch(function(e){return console.warn(e)})}},{key:"render",value:function(){var e=this.state,t=e.key1,a=e.key2,n=e.error,r=this.state.coords,o=r.lat,s=r.lng;return c.a.createElement("div",{className:"App"},c.a.createElement(h,{title:"Countries",data:this.state.countries,showDetails:this.showCountry}),c.a.createElement(h,{title:"Cities",data:this.state.cities,showDetails:this.showCity,key:t}),c.a.createElement(h,{title:"Company",data:this.state.companies,showDetails:this.showCompany,key:a}),c.a.createElement("div",{className:"map"},c.a.createElement("p",{className:"map__title"},"Map"),c.a.createElement("div",{className:"map__display"},null===o&&null===s?c.a.createElement("div",{className:"lds-ring"},c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null)):n?c.a.createElement("p",{className:"map__error"},"Server isn't responding. Try again later."):c.a.createElement("div",{id:"map"}))))}}]),t}(n.Component),k=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return c.a.createElement(j,null)}}]),t}(n.Component);o.a.render(c.a.createElement(k,null),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.bbe510db.chunk.js.map